import{_ as S}from"./@babel.e4b76cde.js";var h,k=h||(h={});k.Pop="POP";k.Push="PUSH";k.Replace="REPLACE";var A=function(t){return t};function H(t){t.preventDefault(),t.returnValue=""}function L(){var t=[];return{get length(){return t.length},push:function(r){return t.push(r),function(){t=t.filter(function(e){return e!==r})}},call:function(r){t.forEach(function(e){return e&&e(r)})}}}function O(){return Math.random().toString(36).substr(2,8)}function R(t){var r=t.pathname;r=r===void 0?"/":r;var e=t.search;return e=e===void 0?"":e,t=t.hash,t=t===void 0?"":t,e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function B(t){var r={};if(t){var e=t.indexOf("#");0<=e&&(r.hash=t.substr(e),t=t.substr(0,e)),e=t.indexOf("?"),0<=e&&(r.search=t.substr(e),t=t.substr(0,e)),t&&(r.pathname=t)}return r}function _(t){function r(){var n=s.location,a=l.state||{};return[a.idx,A({pathname:n.pathname,search:n.search,hash:n.hash,state:a.usr||null,key:a.key||"default"})]}function e(n){return typeof n=="string"?n:R(n)}function x(n,a){return a===void 0&&(a=null),A(S({pathname:g.pathname,hash:"",search:""},typeof n=="string"?B(n):n,{state:a,key:O()}))}function y(n){m=n,n=r(),c=n[0],g=n[1],w.call({action:m,location:g})}function P(n,a){function f(){P(n,a)}var i=h.Push,o=x(n,a);if(!u.length||(u.call({action:i,location:o,retry:f}),!1)){var p=[{usr:o.state,key:o.key,idx:c+1},e(o)];o=p[0],p=p[1];try{l.pushState(o,"",p)}catch{s.location.assign(p)}y(i)}}function E(n,a){function f(){E(n,a)}var i=h.Replace,o=x(n,a);u.length&&(u.call({action:i,location:o,retry:f}),1)||(o=[{usr:o.state,key:o.key,idx:c},e(o)],l.replaceState(o[0],"",o[1]),y(i))}function v(n){l.go(n)}t===void 0&&(t={}),t=t.window;var s=t===void 0?document.defaultView:t,l=s.history,d=null;s.addEventListener("popstate",function(){if(d)u.call(d),d=null;else{var n=h.Pop,a=r(),f=a[0];if(a=a[1],u.length){if(f!=null){var i=c-f;i&&(d={action:n,location:a,retry:function(){v(-1*i)}},v(i))}}else y(n)}});var m=h.Pop;t=r();var c=t[0],g=t[1],w=L(),u=L();return c==null&&(c=0,l.replaceState(S({},l.state,{idx:c}),"")),{get action(){return m},get location(){return g},createHref:e,push:P,replace:E,go:v,back:function(){v(-1)},forward:function(){v(1)},listen:function(n){return w.push(n)},block:function(n){var a=u.push(n);return u.length===1&&s.addEventListener("beforeunload",H),function(){a(),u.length||s.removeEventListener("beforeunload",H)}}}}export{B as J,_ as c,h as r};
